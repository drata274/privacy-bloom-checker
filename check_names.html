<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>چک امن نام در لیست افشاشده</title>
  <style>
    body { font-family: Tahoma, sans-serif; text-align: center; padding: 40px; background: #f8f8f8; }
    h1 { color: #333; }
    input { padding: 12px; width: 300px; font-size: 18px; margin: 20px; }
    button { padding: 12px 30px; font-size: 18px; background: #007bff; color: white; border: none; cursor: pointer; }
    #result { margin-top: 30px; font-size: 22px; font-weight: bold; }
    .safe { color: green; }
    .possible { color: #d9534f; }
  </style>
</head>
<body>
  <h1>چک کن آیا نامت در لیست افشاشده شادی امین هست یا نه</h1>
  <p>نام *کامل* خودتان را وارد کنید و روی دکمه چک کن کلیک کنید.<br>همه چیز داخل مرورگر شما انجام می‌شه — هیچ اطلاعاتی ارسال نمی‌شه.</p>
  
  <input type="text" id="nameInput" placeholder="مثال: ata nariman" />
  <button onclick="checkName()">چک کن</button>
  
  <div id="result"></div>

<script>
  // Bloom Filter ساده JavaScript با salt
  class SimpleBloomFilter {
    constructor(bitSize, hashCount, base64Bits) {
      this.bitSize = bitSize;
      this.hashCount = hashCount;
      this.salt = "jfi-victims-salt-2026"; // salt ثابت برای امنیت بیشتر
      // لود بیت آرایه از base64
      const byteString = atob(base64Bits);
      const bytes = new Uint8Array(byteString.length);
      for (let i = 0; i < byteString.length; i++) {
        bytes[i] = byteString.charCodeAt(i);
      }
      this.bits = bytes;
    }

    // هش ساده (murmur-like + fnv-inspired برای تنوع)
    _hash(str, seed) {
      let h = seed ^ str.length;
      for (let i = 0; i < str.length; i++) {
        h = Math.imul(h ^ str.charCodeAt(i), 3432918353);
        h = h << 13 | h >>> 19;
      }
      h = Math.imul(h ^ (h >>> 16), 2246822507);
      h = Math.imul(h ^ (h >>> 13), 3266489909);
      return (h ^= h >>> 16) >>> 0;
    }

    check(item) {
      const str = this.salt + item.toLowerCase().trim(); // اضافه کردن salt
      if (str.length < 5) { // شرط طول برای جلوگیری از تست‌های کوتاه
        return { valid: false, message: "لطفاً نام کامل‌تر وارد کن (حداقل ۵ حرف)." };
      }
      for (let i = 0; i < this.hashCount; i++) {
        const hash = this._hash(str, i);
        const pos = hash % this.bitSize;
        const byte = Math.floor(pos / 8);
        const bit = pos % 8;
        if ((this.bits[byte] & (1 << bit)) === 0) {
          return { valid: true, isPossible: false };
        }
      }
      return { valid: true, isPossible: true };
    }
  }

  // تنظیمات: اندازه بزرگ برای false positive نزدیک به صفر
const base64Bits = "AAAVAABAIIQIAAAAAAAgAAEAAAAAAAAAAgFQgAEQAACAADAgIBAEAAQBgAIQgEAQACEBEAEIAQgAgAEAAAQAICBgAEABAgQQACAQAgCAQAAAgBAIAgAkoCAEAAIAAAAgAAAAAAAAAAAAEACJAAAQAAAAAQAAMAAAAOEBAAAAAggAAAAAEgAAAAAGAAAgAAAAAAAAAACIAAAAAAACABQQAAAAIAAEjAAAAggIAgBRAAAQAAEAABIgAQRAiSBASABQGAEAAAEAAAgCAAABIAIgAAAAEAIAAACAAIQAQBAAAAAAAAAEACAAAUACCAAQAAAAAQAABARAABAAIAAAACAAAAAAAAAAAABAAAEAEQAQgBAAAAAAgABAAAAACAAEIAAAAAACAAAEBAAAIAAEAAASACAAYAAAAABAgAAAAAAAAAAAQAAAABAAAAAMAAAAAAAAAAQAACAoAAAAAQBgIBAAEAQAAAAEEAAAAgAQAAACCAIACACAEQIACAAAhBgEgAAAAAAAAAYAAAAEAAEAAAQAiAAAACAwAAACAFQAEAACAAAAIAgAEABIQQAEAAWAHACAEAAQEAICAAAAAABBAABCABgEBAgAABAAAgAUAAACESAAgATAAAABEEAEAAAIAAAAgAAAAAAgAAAIAAAAAAIAgACAACgAAAEAUAAAAAAQQAAAAAAEAAAMgBAMRAAUgFABAESAAAQAAAAAAAAACAAAEAAAQAEgAAAAAAUCAAAAAiAYAAAAAYAAAXAAAQIAABAAAASBCgAAAAgwAACCEHRAAAAAAAAAAEAAGAABEgAAQAAgMAAgQICIAAEAQAAAQUAIAAACACRAEAMAACAAABAACAECAAAAAQAgAEEAAAIAAAAgcAAIAAAiIAAEAAAAAABAAoAACAAAEAAAAgFACcAAAAAAAAgABAAQEABBAkIAAgCAAAAASABQAAJBAAABAEAQICBUAAAARA4IAEAAAAIAIAAAgIAFAoAAAAAAARAAAAAKBAACAAAgBCAAAAAAAAAQAAAIIAAAgAAAAAACAAAiAAAAAAAIIAAGAAAAACCAAAAAggAAEAgAAACAAAEAAAAAAIQRAAQAAAAABgAAQSAARAAQAAAABAEAAIAAEAAggBAAAAAQAAAwECBQAAAAAAEUAAAAABBAAAAQQAAABJAEBIJCAABEEAEAAAAAMIAAAAAEAgCAAAACAAAAEAAAEgAAAAgAAAAAQAAAAAAAAAgIIAIAggAQECAEAAAAAAAIABAAAAgAAEAQAAAIwAIgApQEyAQAAAABBRQAAwAAACAYBQAAQgAAgAGIAEAAAEAAAhAAAAACZAAAAABBgCEAAAACSAAEAAAAIAAQACACAAkIAAAAAAACAJAAJAAAQREIAIAAAQCAAIAABQACAQAAgAAAAAAACAAEICAAAAABAAAAAQACQAAEAAAAAgAAAGBmEIAgAAAAAAIgBBAQQMAAAABAAAAAGgAEAAAIAAAAACEABQACBgAAAAAAAAAEAAQAAAAGAAAAABAQAAAEAAACAAAAKAAAgBAABAAAgADABAAAAKgAAAUAAAAgKEAAAAAICAAgAAAAAQAAAAAAABAAYACAAgGAAQAAABIAoABAAAgABAAAAIAAMAAAACAAAAAAAAAAgQACAAAAAAEAAAEEIQAAAAAAAEAAAQAAMQACBABAAAMAIAEAAQAAAVBABAAAQAAAgBAAAQAAEAAQQBAAAIEABAAACENBAAAARCoEJAAIAAABCAAAACAEwAgCAAAggkSIEgQAAAEABAgAIAAABBgABAIAAQAAAgAEAGAAABGgAAAAAAAAgAAABAABgAEAggAMAAEAAAAAABAHAAgAgAAAEAAAQHAAAQAAAAAAEAAAABECGNAAAAAACAAAAABgAgAQAAAADAABAAAAQAQAIAAAAAAAAACAEIJAACAAEwAAIACAAAAIBAQABABAEAAAAKQAAigAAAQgBABgACAECCAEQAAAEEAAAAgAAIBSAAAAUACQEAAAAAAABBIGAAAAABAAAUAAAgADAAAAIAgAAgACIEEgAAEAAAABYAAQAAAoAwAABAAABQAEAAAAQASQAABBgAAABAAAEAQAEIgAggAIAAAAEQAIAqChQgAAAAIBAAAgAAAAAgiAACAAgAAQQAAAAAAIEDQAABAIAAAAEAAAEAAAAIAAAAAgACEAAAQAAQAAAAAEAAQAEAQIYIAIAAAAAQAIAAAAAgAREAAEDAAIABAAAAAAFCIAAAAAAACAAIAAAAMEgCAAAACAAIAAAAABAEAARAYAAAAAAoABAAAAAAAgAAISAAACAAAQAAA4ACQDAKAAEAAAFAgkBAACAAEAwhAAABARAAAgAACAAAAAAAEAwAAAAAAAAAAAgAAECAAAACgIBAAACBBBgAAAAAAAgCAAAEgoAZAAAQABAyAAAAAAAAAQwAAAAEAEQBAgAAECAAAAEAAAAAAgAAgAAAAAAAAgAAAAACAAAAAAABAAAAACIAAAAAAgACBABAAAAAAAgAAEADAAAAQABAAAEAAAABIJBECAAAAAAAAEABAAAAQCAEAEAEAEAAANAAiAEAAAQAAAAACAAAAABAAhCEAAEIAAAAABAAQgAAIAAAAAAAAAAQAAIQCAkAEAAQCAAAICAECAABABAAgEAAAAAAAIQQQKAAAEABAAQAAAAABAAAIAIAAEAEQEAiABAAgAsQACkEAAAAEAEACBQQAAgAAgQiAABAAAAEgEAAAABEAAAAQAAAIAAgAACBQAAAAQAQAMCIIAAAAEBAAAATAAAAAYEAAIAAASAACAQhAAAAEAEAEAAAEgAwACAAAgAAEAgQAAgARAgASIAUAAACACAAAQEAAcAAAAAACAAAAAQgABAAAAAAAMACAAkAAAABAggAAAAAAAAAAAAAKBAAAAAADBIAEAAAAQAUACQAAAAAAIEAAgAQEAFAEAAIEAAAAARAAAAAAAAACAAAiIEAAAQEAQAgAAAAAGAAQAgAYEAAAAALAIAQIhQAQAIBJgAAgoghAgAAIAAIAAIAAAggAAAAAUSAAAAAAQAJgAEAAAAAJAAEAAREAAAAAAgBEQEAAAAEAEAgAAAAACEAAgEAABAAAEAICCIDAJgAAAgA6SAICCAAAABAAAAQAAAAAAAAgAAQAACAFAIAAAAAEAEAAAAIAAIIABAGAIgIAiAQAEABRgAAABAAAAAAAAAAABQAAAiAAAAAAAQYAAAgAAAAAQDAAAAAAQgAAQUAAACABAEAAAAAAAAAAICBCAQIAAAAABFAJAAABAAFARAAAgAAAEEIAEACAAgAQBAEEACAAQgAAAAFAAAAAAEAAACoRIAABIIAABCAAAgAIAAggAAAEDBEAgACKAAAAQAAAAaAAOAgAAAAQAEAiAAAIGCAAAAAUAEAAqQACAAAEAIAAAAAAQBECAAASEAAQSAAAAgAAECAAAAAAgUAAAAAAAAABAgAAAEEAAAAABgAACgAggAQACQAMAAAAIAAiSAAAAQABAQBgiQQEQAAQAAQAAAAAAAAAAAgAAAACQIgCAAAAAAAAAAAIAAAAAAAcAgAQBEAJEAACAgAgAA4AAAAABAAAAAAgARAAAAAAAAAAAABAAAAAAEAAAAACAAAAAAAABABggEBAABAAAQAwAAAABAQRAIABAAAABIEAAAIAgAAAAAAAAAgAAgAAwAQAAEAEAEAAAAwCEAAAQgAgIAgAAAAAAEAAAAAAAABEAAEAAYAAwAAFADEAAAAAAFAAkRAAFIAQAAAAAAAABACEAAgACAAAAABAQgBECAAAAAAQAQAMAFAAAECQBAgCCAAAwAEAAAYAAAQAAAAAAoAUAAQQEIAAAGAEAAIAAICAEAACACAAYBAIAAAAgAAMAEAAAAAGAAAAACAAACAAAAAgAAAAAAABAAAQAAAQRAIAAAAAAAAAAAIEAAAgAAAAgAAAAAAAAUAACBAgAAAMDAAHAAISAAAAAAAFAAIAgAAAAgAAkACIANkAgAAIAAgkAAAAAgAAAAAEIAAAAIAAIAAABQAAEGAgAAEAUCAAAAAEAAAAA0gAAgAAAAAAACABAAAAAACACIQAAACACAEAoBQgAEAAAAAAAAEAAAAAABAQAAAIIBRAACAAAAEAAQAkAAAAIAJggAAAAgAAEEQAQAIAAAAAAAABAJAAAAAAAAEAAAAAAAAAAQEEAAEBBAAQAEg0kIGYAASAgAEAACAAIAIEEMAAgIAAAgAAIIhAAIAAAAAEAAIQEAAAQADkACSIAAIAAEQgAIAoAUwCAAAABAAAAAAAgAAAAAAAAAAAAAIhABiAAABEABAACAAAAQAgCAEBIAAACAoQBgAAgAAAAAAAAAhAAEHAAABEIACAAIAAQgAgQAAAAAAEAQgAAEBABBkQCEAACgAAAAAhgAAAAAAQApAAAAAMCAAAJBAAAEREAACAggAAAAAAAQAAAIAQAgiEAAAEABAAAAFAAAAAAAAIEAABAAAAAEAgQAAkAACAAAIACABAKAAAQAACAEEAgiAAgAAAAgAAgAAAAACAABACAAAIBAAQCAAQAABQAAAUBACAAFACAMAAgAAAAGAQAAAIGAAAABAAgSAEAACoAAABAAAEAKAQAEAAIAAQEAAACAAEAEgAEAALCAAQggiEAAAAAAAAkAAAAoAAEAAAAQAAABAgABQAQAAAAICMAAIQAAAAAACAABAAAADQAgAgCAAJAQAAkAAAAAACRIAAAACQAAAAwDAAIAggAAAUQCQAAgAAiAAAAAABCAAEAiAARAQEAQAAAACQQAAEABAAMAMIAADAAAAAABABAAAAEQAQAQAABAABAAhAAKIIACAAgAAQAAFAAAAAAAAACBAAFAABBAAkAgQgAAwAhAABACAAAAgAAIEAAAAAAAEAAAAgAAAAAAAAAEQAAgIAACAABAAIABgCQAgAAAAAAAAAQAEAIAiAAACSAACAAAABEABAAAAAAAAAABQEAQgAoAoAAQAAI";
  const bf = new SimpleBloomFilter(30000, 7, base64Bits); // اندازه بزرگ برای امنیت

  function checkName() {
    const input = document.getElementById("nameInput").value.trim();
    const result = bf.check(input);
    const resultDiv = document.getElementById("result");
    if (!result.valid) {
      resultDiv.innerHTML = result.message;
      resultDiv.className = "";
      return;
    }
    if (result.isPossible) {
      resultDiv.innerHTML = "ممکنه نام شما در لیست باشد — لطفاً DM بده برای چک دقیق‌تر.";
      resultDiv.className = "possible";
    } else {
      resultDiv.innerHTML = "نام شما قطعاً در لیست نیست.";
      resultDiv.className = "safe";
    }
  }
</script>